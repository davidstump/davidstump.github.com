
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>David Stump</title>
	<meta name="author" content="David Stump">

	
	<meta name="description" content="Fun With Variants and Enums in Rails 4.1 This article was originally published at Littlelines. The release of Rails 4.1 this past week included some &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="David Stump" type="application/atom+xml">
	
	<link rel="canonical" href="http://davidstump.github.com/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=Raleway:100" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Lora:400,400italic,700,700italic|Istok+Web:400,400italic,700,700italic" rel="stylesheet" type="text/css">

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="http://www.linkedin.com/in/davidstump/" target="_blank">Profile</a></li>
  <li><a href="http://github.com/davidstump/" target="_blank">GitHub</a></li>
  <li><a href="http://littlelines.com/" target="_blank">Littlelines</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<!-- <nav id="sub-nav">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/davidstump" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/davidstump" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav> -->
<div class="profile-container">
  <div class="profilepic">
    <script src="/javascripts/md5.js"></script>
    <script type="text/javascript">
$(function(){
  $('.profilepic').append("<img src='/images/avatar.jpg' alt='Profile Picture' style='width: 160px;' />");
});
    </script>
  </div>
  <hgroup>
  <h1 class="site-title"><a href="/">David Stump</a></h1>
  
  <p class="site-subtitle">Hacking Adventures in Dayton, OH.</p>
  
  </hgroup>
  

</div>
</header>
			</div>
		</div>
		<div class="mid-col">
			
				
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/davidstump">davidstump</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('davidstump', 5, false);
	})(jQuery);
</script>

			
			<div class="mid-col-container">
				<div id="content" class="article-inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2014/04/21/fun-with-variants-and-enums-in-rails-4-dot-1/" itemprop="url">Fun With Variants and Enums in Rails 4.1</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><em>This article was originally published at <a href="http://littlelines.com/blog/2014/04/21/fun_with_variants_and_enums_in_rails_4_1/">Littlelines</a>.</em></p>

<p>The release of Rails 4.1 this past week included some <a href="http://weblog.rubyonrails.org/2014/4/8/Rails-4-1/">cool new features</a> two of which are the introduction of enums and variants. Enums give us some syntatic sugar for handling attributes like status, role, etc. Variants allow us to handle separate types of templates from within a respond_to block on a given action. I setup a <a href="https://github.com/davidstump/enums_and_variants">tiny Rails 4.1 application</a> to demonstrate one possible use for these two new features.</p>

<p><strong>Enum</strong> </p>

<p>This application has a basic user model with a name string and an email string. The users controller contains basic index and show actions to show a list to users and their respective details. In the user model, I included an enum attribute <code>role</code> to handle differentiating between users of different types (student, admin or staff). The basic way of defining an enum attribute is as follows:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">enum</span> <span class="n">role</span><span class="p">:</span> <span class="o">[</span><span class="ss">:student</span><span class="p">,</span> <span class="ss">:admin</span><span class="p">,</span> <span class="ss">:staff</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>However, with enums used in this fashion, order must always be maintained or you risk recasting your users with a new role unintentionally. Suppose, months later, a new developer comes along and adjusts the code above like so:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">enum</span> <span class="n">role</span><span class="p">:</span> <span class="o">[</span><span class="ss">:golfer</span><span class="p">,</span> <span class="ss">:student</span><span class="p">,</span> <span class="ss">:admin</span><span class="p">,</span> <span class="ss">:staff</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We have now, inadvertanly, cast every user previously assigned with the role <code>:student</code> to <code>:golfer</code>. Oops. </p>

<p>For this reason I would most likely use explicitly defined enums to avoid any potential future mishaps:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">enum</span> <span class="n">role</span><span class="p">:</span> <span class="p">{</span><span class="n">student</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">admin</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">staff</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>In this example, even if my new developer friend stumbles across this and updates it, they would have to explicitly overwrite the role associated with a given integer to cause any harm. </p>

<p>Once I have my enum defined, I now have access to all kinds of goodies to use throughout my application. I can now easily determine a given users role:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">user</span><span class="o">.</span><span class="n">role</span> <span class="c1"># =&gt; &quot;student&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>I can easily determine if a user is a member of a particular role:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">user</span><span class="o">.</span><span class="n">student?</span> <span class="c1"># =&gt; true</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>I can quickly assign/update a user’s role:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">user</span><span class="o">.</span><span class="n">staff!</span> <span class="c1"># =&gt; [sql] true</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Or see all of the users scoped to a particular role:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="no">User</span><span class="o">.</span><span class="n">staff</span> <span class="c1"># =&gt; #&lt;ActiveRecord::Relation []&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>Variants</strong></p>

<p>Variants can be used within a respond_to block to handle the same action in separate ways. Using the <code>User</code> model from above, we can render a show page unique for a particular user’s role.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">def</span> <span class="nf">show</span>
</span><span class="line">  <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
</span><span class="line">  <span class="n">request</span><span class="o">.</span><span class="n">variant</span> <span class="o">=</span> <span class="vi">@user</span><span class="o">.</span><span class="n">role</span><span class="o">.</span><span class="n">to_sym</span>
</span><span class="line">  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
</span><span class="line">    <span class="nb">format</span><span class="o">.</span><span class="n">html</span> <span class="k">do</span> <span class="o">|</span><span class="n">html</span><span class="o">|</span>
</span><span class="line">      <span class="n">html</span><span class="o">.</span><span class="n">student</span>
</span><span class="line">      <span class="n">html</span><span class="o">.</span><span class="n">staff</span>
</span><span class="line">      <span class="n">html</span><span class="o">.</span><span class="n">admin</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>In this example, the variants of the show action such as <code>html.student</code> will render a view template with the name matching: <code>show.html+student.haml</code> (or erb if you prefer). This allows us to use the same logic from our show action but render different content/layouts. This pattern could also be used to present different templates for mobile devices, webviews inside native mobile apps, etc. </p>

<p>With very little additional code, enums and variants allowed me to add a very basic role engine to my application and render content unique to a user’s role. These are just two of the fun new updates released in Rails 4.1. Check out the <a href="http://edgeguides.rubyonrails.org/4_1_release_notes.html">Release Notes</a> for some additional reading.</p>

<p>Cheers!</p>


		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2014/02/21/how-to-use-angular-and-keep-loving-rails/" itemprop="url">How to Use Angular and Keep Loving Rails</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><em>This article was originally published at <a href="http://littlelines.com/blog/2014/02/21/how_to_use_angularjs_and_keep_loving_rails/">Littlelines</a>.</em></p>

<h2 id="my-approach">My Approach</h2>

<p>I love writing Ruby and I love using Rails. So when I started looking for a
  client-side framework to help organize my front-end process and code, I was
  cautious of frameworks that demanded I abandon my “Rails Way” and adopt their
  process, style, and approach. I was looking for a framework that added value to
  my “Rails App”, not a solution that wanted Rails to instead act as a
  compliment to my client-side app.</p>

<p>Enter Angular stage left.</p>

<p>But wait, you say, tons of Angular apps use Rails (or any other framework) as
  a backend api for their purely client-side application. Yes, you would be very
  correct, however, unlike numerous other client-side frameworks, Angular allows
  me to easily and quickly sprinkle it on top of my traditional Rails app if
  that’s my preference.</p>

<p><strong>CAVEAT</strong> - This article is only meant to demonstrate how I stayed a happy, healthy
  Rails developer while still enjoying all the advantages Angular provides.
  If, in your heart, you want nothing more than to make purely client-side apps
  every day, then more power to you for being focused. Thanks for reading this
  far - and please accept my <strong><a href="http://f.cl.ly/items/3c340s340q3d3q3X0I0h/corgis.gif">token of thanks</a></strong>.</p>

<p>My happy-place with Angular and Rails is to let each framework do what it’s
  good at and then move aside. For Rails, it is well suited to handle routing,
  helpers and primary application logic. For Angular, it is best suited to
  handle client-side interactions, dynamic bindings, ajax requests and
  presentation logic. Using this approach I can stay away from so many headaches
  caused by Angular routing, Rails remote linking and endless arbitrary jQuery
  listeners.</p>

<p>Once I had settled on an approach to co-existence of Angular and Rails, my next
  obstacle was the somewhat verbose and obscure Angular syntax.</p>

<h2 id="coffeescript-sanity">CoffeeScript Sanity</h2>

<p>Personally, I love using CoffeeScript (through that is in no way required to
  enjoy Angular on Rails) and my first step in incorporating Angular into my
  daily Rails flow was to get a handle on some of the more obtuse Angular syntax
  in favor of the CoffeeScript class approach.</p>

<p>The first step was to create a base class (NGObject) to handle basic
  dependency injection. This class iterates through the array of dependencies
  passed via the class @$inject variable and creates an instance variable with
  the same name. This gives us the ability to easily reference scope, services,
  etc passed into our angular object by friendly means (@scope, @Thing,
  @ThingSvc, etc). Once the dependencies are handled, the NGObject class will
  check for an init() function and call it if one exists.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="k">class</span> <span class="nx">@NGObject</span>
</span><span class="line">  <span class="nv">constructor: </span><span class="nf">(dependencies...) -&gt;</span>
</span><span class="line">    <span class="k">for</span> <span class="nx">dependency</span><span class="p">,</span> <span class="nx">index</span> <span class="k">in</span> <span class="nx">@constructor</span><span class="p">.</span><span class="nx">$inject</span>
</span><span class="line">      <span class="nx">@</span><span class="p">[</span><span class="nx">dependency</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s">&#39;$&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="nx">dependencies</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span>
</span><span class="line">    <span class="nx">@init</span><span class="o">?</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Next, I use that NGObject base class to build a variety of other classes to
  handle specific angular object types such as NGController, NGService, etc.
  Each of these classes exposes a register function that wires up our object to
  the correct angular application. During object construction, we take the
  attributes of a given object (controller, service) and apply them to the
  proper scope. This allows us access to the attributes and functions of any
  object in the view layer.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="k">class</span> <span class="nx">@NGController</span> <span class="k">extends</span> <span class="nx">@NGObject</span>
</span><span class="line">  <span class="vi">@register: </span><span class="nf">(app) -&gt;</span>
</span><span class="line">    <span class="nx">app</span><span class="p">.</span><span class="nx">controller</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">@name</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">this</span>
</span><span class="line">
</span><span class="line">  <span class="nv">constructor: </span><span class="nf">(@scope) -&gt;</span>
</span><span class="line">    <span class="nx">@scope</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span> <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="k">this</span> <span class="k">when</span> <span class="o">!</span><span class="nx">@scope</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span><span class="o">?</span>
</span><span class="line">    <span class="k">super</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Specifically for service objects, we setup an NGService object that implements
  event notifications allowing controllers, directives, etc to register callbacks
  for specific service events. In the service, whenever desired, you can call the
  <code>notify</code> function and inform all registered observers that the specific event
  occurred.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="k">class</span> <span class="nx">@NGService</span> <span class="k">extends</span> <span class="nx">@NGObject</span>
</span><span class="line">  <span class="vi">@register: </span><span class="nf">(app) -&gt;</span> <span class="nx">app</span><span class="p">.</span><span class="nx">service</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">@name</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">this</span>
</span><span class="line">
</span><span class="line">  <span class="nv">observableCallbacks: </span><span class="p">{}</span>
</span><span class="line">
</span><span class="line">  <span class="kc">on</span><span class="o">:</span> <span class="nf">(event_name, callback) -&gt;</span>
</span><span class="line">    <span class="nx">@observableCallbacks</span><span class="p">[</span><span class="nx">event_name</span><span class="p">]</span> <span class="o">?=</span> <span class="p">[]</span>
</span><span class="line">    <span class="nx">@observableCallbacks</span><span class="p">[</span><span class="nx">event_name</span><span class="p">].</span><span class="nx">push</span> <span class="nx">callback</span>
</span><span class="line">
</span><span class="line">  <span class="nv">notify: </span><span class="nf">(event_name, data = {}) -&gt;</span>
</span><span class="line">    <span class="nx">angular</span><span class="p">.</span><span class="nx">forEach</span> <span class="nx">@observableCallbacks</span><span class="p">[</span><span class="nx">event_name</span><span class="p">],</span> <span class="nf">(callback) -&gt;</span>
</span><span class="line">      <span class="nx">callback</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>We use an event_name for each event type which adds the ability to sanely
  register and call multiple events explicitly as so:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nv">handleEvent: </span><span class="o">-&gt;</span> <span class="nx">notify</span> <span class="s">&#39;my:event&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nx">MyService</span><span class="p">.</span><span class="kc">on</span> <span class="s">&#39;my:event&#39;</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="nx">doStuff</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Included in my Rails projects, this helper allow me to write concise and
  legible angular code in my preferred CoffeeScript class syntax. Here is a short
  example of a rewritten Angular controller with the new syntax and format:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="k">class</span> <span class="nx">CalendarCtrl</span> <span class="k">extends</span> <span class="nx">@NGController</span>
</span><span class="line">  <span class="nx">@register</span> <span class="nb">window</span><span class="p">.</span><span class="nx">App</span>
</span><span class="line">
</span><span class="line">  <span class="vi">@$inject: </span><span class="p">[</span>
</span><span class="line">    <span class="s">&#39;$scope&#39;</span><span class="p">,</span>
</span><span class="line">    <span class="s">&#39;Calendar&#39;</span><span class="p">,</span>
</span><span class="line">    <span class="s">&#39;Panel&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="p">]</span>
</span><span class="line">
</span><span class="line">  <span class="nv">init: </span><span class="o">-&gt;</span>
</span><span class="line">    <span class="vi">@config = </span><span class="nx">@Calendar</span><span class="p">.</span><span class="nx">config</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Is there anything explicitly problematic or wrong about the verbose
  traditional Angular syntax? Absolutely not! Does this syntax make me a happier
  developer and allow me to get my code out the door quicker? Without a doubt.
  Setting up this syntax was a fun endeavor and my hope is it makes at least one
  other developer’s life happier!</p>

<h2 id="rails-resource-to-the-rescue">Rails Resource To The Rescue</h2>

<p>One of the last remaining hurdles to quick and easy angular development with
  rails is wiring up Rails resources with Angular. One source of frustration is
  Angular’s handling (or lack thereof) of nested resource parameters. Here are a few
  recent GitHub issues as examples of that frustration <strong><a href="https://github.com/angular/angular.js/pull/1640">fix(ngResource): Add support for nested params</a></strong>
  and <strong><a href="https://github.com/angular/angular.js/issues/3740">Query params not serializes as expected</a></strong>.
  Thankfully, Angular uses a modular approach to resource handling, so swapping
  ngResource with a different library is a breeze.</p>

<p>After months of massaging the flat params from Angular in my Rails controllers, I
  stumbled across <strong><a href="https://github.com/FineLinePrototyping/angularjs-rails-resource">Rails Resource</a></strong>.
  Rails Resource is a promise based resource module that handles Angular resources
  exactly as a default Rails application would expect. With very little code, we
  can wire up Angular with our Rails resource and be on our way.</p>

<p>As an example, I have a basic Rails app with a model Beer that <code>belongs_to</code> a
  Brewery. To wire up Angular with these resources using Rails Resource I could
  write an Angular factory such as:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nx">App</span><span class="p">.</span><span class="nx">factory</span> <span class="s">&quot;Beer&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;railsResourceFactory&#39;</span><span class="p">,</span> <span class="s">&#39;railsSerializer&#39;</span><span class="p">,</span> <span class="nf">(railsResourceFactory, railsSerializer) -&gt;</span>
</span><span class="line">  <span class="nv">resource = </span><span class="nx">railsResourceFactory</span>
</span><span class="line">    <span class="nv">url: </span><span class="s">&quot;/beers&quot;</span>
</span><span class="line">    <span class="nv">name: </span><span class="s">&quot;beer&quot;</span>
</span><span class="line">    <span class="nv">serializer: </span><span class="nx">railsSerializer</span> <span class="o">-&gt;</span>
</span><span class="line">      <span class="nx">@nestedAttribute</span> <span class="s">&#39;brewery&#39;</span>
</span><span class="line"><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This code creates an Angular resource ‘Beer’ and maps it to the appropriate
  endpoints in our Rails application. Our next step is to setup the association
  with the Brewery model. You can see this done above with the following lines:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line">  <span class="nv">serializer: </span><span class="nx">railsSerializer</span> <span class="o">-&gt;</span>
</span><span class="line">    <span class="nx">@nestedAttribute</span> <span class="s">&#39;brewery&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The serializer in Rails Resource looks to be quite powerful in allowing you to
  both specify relationships and alter the json coming and going to resource
  endpoints. The factory we have created above sets up a Beer resource in Angular
  that <code>accepts_nested_attributes_for</code> a Brewery resource. With only the code
  demonstrated above, the parameters sent to the logs on a create action (for example)
  are just what Rails expects and is handled easily by a traditional Rails
  create action.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="no">Started</span> <span class="no">POST</span> <span class="s2">&quot;/beers&quot;</span> <span class="k">for</span> <span class="mi">127</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span>
</span><span class="line"><span class="no">Processing</span> <span class="n">by</span> <span class="no">BeersController</span><span class="c1">#create as JSON</span>
</span><span class="line"><span class="no">Parameters</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;beer&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Goose Island IPA&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Hoppy Goodness&quot;</span><span class="p">,</span>
</span><span class="line">             <span class="s2">&quot;brewery_attributes&quot;</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="o">=&gt;</span><span class="s2">&quot;Goose Island&quot;</span><span class="p">}}}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="the-result">The Result</h2>

<p>During this article I have described three tools I use to make me a happier Rails
  developer leveraging the power of AngularJS in my applications:</p>

<ol>
  <li>Letting each framework handle what it’s good at</li>
  <li>The CoffeeScript helper that allows me to write more concise code in a syntax I enjoy</li>
  <li>A resource module that wires up Rails resources with ease</li>
</ol>

<p>Using these methods I setup a very basic CRUD Rails application on Github
  <strong><a href="http://github.com/davidstump/beers">davidstump/beers</a></strong>. With the exception
  of the factory shown above, the only Javascript required was a short and sweet
  Angular controller:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="k">class</span> <span class="nx">BeersCtrl</span> <span class="k">extends</span> <span class="nx">@NGController</span>
</span><span class="line">  <span class="nx">@register</span> <span class="nb">window</span><span class="p">.</span><span class="nx">App</span>
</span><span class="line">
</span><span class="line">  <span class="vi">@$inject: </span><span class="p">[</span>
</span><span class="line">    <span class="s">&#39;$scope&#39;</span><span class="p">,</span>
</span><span class="line">    <span class="s">&#39;Beer&#39;</span>
</span><span class="line">  <span class="p">]</span>
</span><span class="line">
</span><span class="line">  <span class="nv">init: </span><span class="o">-&gt;</span>
</span><span class="line">    <span class="nx">@loadBeers</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">  <span class="nv">loadBeers: </span><span class="o">-&gt;</span>
</span><span class="line">    <span class="nx">@Beer</span><span class="p">.</span><span class="nx">query</span><span class="p">().</span><span class="k">then</span> <span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class="line">      <span class="vi">@all = </span><span class="nx">results</span>
</span><span class="line">
</span><span class="line">  <span class="nv">create: </span><span class="o">-&gt;</span>
</span><span class="line">    <span class="k">new</span> <span class="nx">@Beer</span><span class="p">(</span><span class="nx">@newBeer</span><span class="p">).</span><span class="nx">create</span><span class="p">().</span><span class="k">then</span> <span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class="line">      <span class="nx">@loadBeers</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">  <span class="nv">destroy: </span><span class="nf">(beer_id) -&gt;</span>
</span><span class="line">    <span class="nx">@Beer</span><span class="p">.</span><span class="nx">$delete</span><span class="p">(</span><span class="nx">@Beer</span><span class="p">.</span><span class="nx">resourceUrl</span><span class="p">(</span><span class="nx">beer_id</span><span class="p">)).</span><span class="k">then</span> <span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class="line">      <span class="nx">@loadBeers</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This style of Angular fits seamlessly into my familiar mental
  model formed from my time developing Rails applications and ultimately makes
  me a quicker, happier and healthier developer.</p>

<p>I would love any and all feedback (and Pull Requests) on both these approaches
  as well as the NGHelper library itself. Thank you for taking the time to read
  through my thoughts and happy coding!</p>


		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2013/05/06/simple-touch-events-in-coffeescript/" itemprop="url">Simple Touch Events in CoffeeScript</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><em>This article was originally published at <a href="http://littlelines.com/blog/2013/05/06/simple-touch-events-in-coffeescript/">Littlelines</a>.</em></p>

<p>I am an avid fan of simple, clean and elegant CoffeeScript (and thus JavaScript of course).
On top of your code being more approachable, I love the sense of accomplishment when
I find a clean way to solve a problem without immediately jumping to an external
library or plugin. Thus, when I was faced with the problem of handling touch
events on handheld and tablet devices for our new site, I started with a
blank page in my favorite editor.</p>

<p>Touch.coffee is a simple and straightforward CoffeeScript class written
with pure JavaScript that emits touch events to your application. The only
dependency this class utilizes is <a href="https://github.com/Wolfy87/EventEmitter">EventEmitter</a>
to aid in handling the event triggers. The full source for this class is available
for browsing on <a href="https://gist.github.com/davidstump/5499239">GitHub</a></p>

<p>To get our class started, we will setup a few variables that will help us along the way.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="vi">@Touch=</span>
</span><span class="line">  <span class="nv">horizontalSensitivity: </span><span class="mi">22</span>
</span><span class="line">  <span class="nv">verticalSensitivity: </span><span class="mi">6</span>
</span><span class="line">  <span class="nv">touchDX: </span><span class="mi">0</span>
</span><span class="line">  <span class="nv">touchDY: </span><span class="mi">0</span>
</span><span class="line">  <span class="nv">touchStartX: </span><span class="mi">0</span>
</span><span class="line">  <span class="nv">touchStartY: </span><span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The sensitivity variables allow us to specify how long a touch event should last before
we go ahead and emit our event to the rest of the application. This helps us differentiate
between a swipe style gesture versus a simple tap. The next two variables will help us gauge the
distance travelled during our touch event. Finally, the last two will let us store the
starting point of our event.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nv">bind: </span><span class="nf">(elements...) -&gt;</span>
</span><span class="line">  <span class="k">for</span> <span class="nx">elem</span> <span class="k">in</span> <span class="nx">elements</span>
</span><span class="line">    <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="s">&quot;touchstart&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class="line">     <span class="nx">@handleStart</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">elem</span><span class="p">)</span>
</span><span class="line">    <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="s">&quot;touchmove&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class="line">     <span class="nx">@handleMove</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">elem</span><span class="p">)</span>
</span><span class="line">    <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="s">&quot;touchend&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class="line">     <span class="nx">@handleEnd</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">elem</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>First we want to add a bind method to our class to attach the appropriate touch events to
whichever DOM element (or elements) specified. This method handles one or more elements
and attaches the touchstart, touchmove and touchend events and delegates the appropriate
handler methods for each type.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nv">handleStart: </span><span class="nf">(event, elem) -&gt;</span>
</span><span class="line">  <span class="k">if</span> <span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span> <span class="o">is</span> <span class="mi">1</span>
</span><span class="line">    <span class="vi">@touchDX = </span><span class="mi">0</span>
</span><span class="line">    <span class="vi">@touchDY = </span><span class="mi">0</span>
</span><span class="line">    <span class="vi">@touchStartX = </span><span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageX</span>
</span><span class="line">    <span class="vi">@touchStartY = </span><span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageY</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Once we have the events attached to the correct elements, we need to tell our class how to
handle the various event types along the way. Here we store our initial values once the touch
event is initially registered.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nv">handleMove: </span><span class="nf">(event, elem) -&gt;</span>
</span><span class="line">  <span class="k">if</span> <span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span>
</span><span class="line">    <span class="nx">@cancelTouch</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span>
</span><span class="line">    <span class="k">return</span> <span class="kc">false</span>
</span><span class="line">
</span><span class="line">  <span class="vi">@touchDX = </span><span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageX</span> <span class="o">-</span> <span class="nx">@touchStartX</span>
</span><span class="line">  <span class="vi">@touchDY = </span><span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">pageY</span> <span class="o">-</span> <span class="nx">@touchStartY</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Next we need a method fired during the portion of the touch event where our finger is moving
across the screen. During this event we want to detect if another touch event is registered
and reset our listeners to avoid complications. We also want to update our two variables
tasked with telling us the distance our touch event has travelled.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nv">handleEnd: </span><span class="nf">(event,elem) -&gt;</span>
</span><span class="line">  <span class="nv">dx = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">@touchDX</span><span class="p">)</span>
</span><span class="line">  <span class="nv">dy = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">@touchDY</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">  <span class="k">if</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">&gt;</span> <span class="nx">@horizontalSensitivity</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">))</span>
</span><span class="line">    <span class="k">if</span> <span class="nx">@touchDX</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">then</span> <span class="nx">@emitSlideRight</span><span class="p">()</span> <span class="k">else</span> <span class="nx">@emitSlideLeft</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">  <span class="k">if</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">&gt;</span> <span class="nx">@verticalSensitivity</span><span class="p">)</span> <span class="o">and</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">))</span>
</span><span class="line">    <span class="k">if</span> <span class="nx">@touchDY</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">then</span> <span class="nx">@emitSlideDown</span><span class="p">()</span> <span class="k">else</span> <span class="nx">@emitSlideUp</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">  <span class="nx">@cancelTouch</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">elem</span><span class="p">)</span>
</span><span class="line">  <span class="kc">false</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Once a touchend event is triggered and the gesture is complete, we need to gather the total
distance travelled both horizontally and vertically. Once we have these values, we can use our
sensitivity variables to determine if the distance of the event is great enough to warrant emitting
to the rest of our application. We can also use the positive or negative value of
our difference/distance variable to indicate the specific direction of our event and emit the
correct notification.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nv">emitSlideLeft: </span><span class="o">-&gt;</span> <span class="nx">@emit</span> <span class="s">&#39;swipe:left&#39;</span>
</span><span class="line"><span class="nv">emitSlideRight: </span><span class="o">-&gt;</span> <span class="nx">@emit</span> <span class="s">&#39;swipe:right&#39;</span>
</span><span class="line"><span class="nv">emitSlideUp: </span><span class="o">-&gt;</span> <span class="nx">@emit</span> <span class="s">&#39;swipe:up&#39;</span>
</span><span class="line"><span class="nv">emitSlideDown: </span><span class="o">-&gt;</span> <span class="nx">@emit</span> <span class="s">&#39;swipe:down&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Finally, once we have successfully registered a touch event and determined that it passes
our sensitivity threshold set initially, we need to emit the correct event to our application.
Using <a href="https://github.com/Wolfy87/EventEmitter">EventEmitter</a> we can easily send out the proper
event notification with very little code.</p>

<p>With our new touch class, we can now bind touch events to any elements in our application.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nx">Touch</span><span class="p">.</span><span class="nx">bind</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s">&#39;menu&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Once we have our bindings set, performing actions based our touch events is as easy as calling
a method when a touch event is detected.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nx">Touch</span><span class="p">.</span><span class="kc">on</span> <span class="s">&#39;swipe:left&#39;</span><span class="p">,</span> <span class="o">=&gt;</span> <span class="nx">@toggleMenu</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>While this class certainly doesn’t handle every possible interaction on a handheld or tablet
device, it does provide you with a great base for handling basic touch events throughout your
application with very little code. I welcome and look forward to any and all feedback, suggestions
and improvements and hope this little class proves helpful!</p>


		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2013/02/10/use-git-to-manage-your-time/" itemprop="url">Use Git to Manage Your Time</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><strong>A gem that uses your git commits to manage a Freshbooks timesheet</strong></p>

<p>As an extension to my git-based timesheet I <a href="http://davidstump.net/blog/2012/12/31/add-a-simple-git-timesheet/">wrote about at the beginning of the year</a>, I went ahead and setup a self contained gem with some additional features. The gem, mytime, can be found at: <a href="http://rubygems.org/gems/mytime">rubygems.org/gems/mytime</a> as well as <a href="https://github.com/davidstump/mytime">github.com/davidstump/mytime</a> for your browsing pleasure. </p>

<p>The mytime gem uses your git commit history, in the same manner as the timesheet alias did, to pull a log of your daily activities. Once you have this daily history, you can tell mytime to ‘push’ all of your commits as a timesheet log to Freshbooks using their API. Additionally, you can ‘submit’ custom timesheet entries to Freshbooks as needed. </p>

<p><strong>MyTime Documentation</strong></p>

<p>Use your git commit history to track your time. Uses Freshbooks API.</p>

<p><strong>Installation</strong></p>

<p>Add this line to your application’s Gemfile:</p>

<pre><code>gem 'mytime'
</code></pre>

<p>And then execute:</p>

<pre><code>$ bundle
</code></pre>

<p>Or install it yourself as:</p>

<pre><code>$ gem install mytime
</code></pre>

<p><strong>Usage</strong></p>

<p>To link to your Freshbooks account (you will need your Freshbooks username and API token):</p>

<pre><code>$ mytime setup
</code></pre>

<p>To initialize mytime in a project directory:</p>

<pre><code>$ mytime init
</code></pre>

<p>To see project details:</p>

<pre><code>$ mytime project
</code></pre>

<p>To list log:</p>

<pre><code>$ mytime status
</code></pre>

<p>To submit custom time entry:</p>

<pre><code>$ mytime commit [hrs] [custom_message]
$ mytime commit  1.5 "Add an additional note if desired"
</code></pre>

<p>To push your git logs from today for a given project:</p>

<pre><code>$ mytime push [hrs]
$ mytime push 4.5
</code></pre>

<p>I would love some feedback and/or pull requests to extend this little gem to include other timesheets, features, etc. I made this to help myself keep track of my daily commits per project, but hopefully it helps out a few others along the way. Thanks for reading!</p>

<p><strong>Cheers!</strong><br />
David</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2013/01/15/a-better-fullscreen-experience-in-sublime/" itemprop="url">A Better Fullscreen Experience in Sublime</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>While I love coding with my editor in fullscreen mode, I also enjoy having apps such as Campfire or Rdio accessible on another monitor. One complaint I have had with the default OSX fullscreen mode is that it causes a second monitor to show nothing but the grey textured spaced background. I was thrilled the other day when I discovered a feature in Sublime that allowed me to use a “simple” fullscreen mode which behaves differently than the standard OSX mode. If you add the following to your Sublime preferences:</p>

<pre><code>"use_simple_full_screen": true
</code></pre>

<p>Using the Enter Full Screen shortcut will allow you to have nothing but your code on one monitor and still use your second monitor for whatever apps your heart desires. Simple preference edit that has made my work flow that much better. </p>

<p><strong>Cheers!</strong><br />
David</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2012/12/31/add-a-simple-git-timesheet/" itemprop="url">Add a Simple Git Timesheet</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>At the end of each day, I find myself crawling through the git logs to record my activities for the day on our timesheet software. It eventually occurred to me that with a few super simple arguments passed to the <code>git log</code> command, I could have a basic output of my timesheet for that day.</p>

<p>Step 1. Edit Your bash_profile file:</p>

<pre><code> $ subl ~/.bash_profile
</code></pre>

<p>Step 2. Add an alias to your profile:</p>

<pre><code> git log --oneline --author="`git config --get user.name`" --since='6am'
</code></pre>

<p>Step 3. Save your profile</p>

<p>Step 4. Check your daily timesheet:</p>

<pre><code> david:~/Projects/octopress❮source❯$ timesheet
      2a08dac Adjust navigation mobile styles and hide search field
      816cfef Apply custom style to site
      b96240c Add Murky-Mussels Theme
</code></pre>

<p>Nothing complicated at all, but hopefully someone else finds this as helpful as I did. Thanks to <a href="http://twitter.com/chris_mccord">@chris_mccord</a> for adding the user.name snippet to this alias.</p>

<p>Cheers!<br />
David</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name"><a href="/blog/2012/12/26/initial-commit/" itemprop="url">Initial Commit.</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><strong>Happy Blizzard 2012!</strong></p>

<p>It’s not quite New Year’s Eve, however, I thought I would get a jump start on a resolution early this year. The resolution idea comes from my awesome co-workers at <a href="http://littlelines.com">Littlelines</a> who each mentioned re-starting their blog presence and making an effort to write and share more in 2013. I love the developer community [specifically the Ruby/Rails community as of late] and the ease/effort with which help, advice, problems and solutions are shared and discussed. For this new year, I am planning to make a concerted effort to write, share and help the community that has helped in uncountable ways getting me where I am today [which is a pretty fantastic happy place!]. </p>

<p>Perhaps this sentimental resolution is partially a result of a bit too much holiday cheer [by way of food, presents, family and one midwest blizzard], but a little more cheer throughout the non-holiday months couldn’t hurt anyone, right?</p>

<p>With that, I hope everyone had a relaxing holiday break and is pumped to start a brand new 2013 in a few days. Also, keep and eye out for some exciting Dayton Ruby Community news in the near future!!</p>

<p><strong>Cheers!</strong><br />
<em>David</em></p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 - David Stump -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>.</span>
</p>

</footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'davidstump';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-37247497-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




		</div>
	</div>
</body>
</html>
